### Git

Git ---> Source Control Management Or Version Control System

### حالات مختلف فایل ها در گیت

Modified ---> Staging ---> Commiting

### مراحل آپلود پروژه در گیت هاب

1. ساخت ریپازیتوری در پوشه لوکال مورد نظر

```
git
git init
```

- برای اولین استفاده از گیت ممکن است دستور زیر لازم باشد که اجرا شود

```
git confing --global --add safe.directory the desired folder address
```

2. همه ی فایل ها رو میبریم توی حالت استیج

```
git add file name
Or
git add .
```

3. از حالت استیج به کامیت میبریم

```
git commit -m "initilizing repository"
```

- مرحله 2 و 3 رو در یک دستور میتوان خلاصه کرد

```
git commit -a -m "..."
Or
git commit -am "..."
```

- با دستور زیر وی اس کد را در برنچ و پوشه ی مورد نظر باز میکنیم تا تغییرات را در صورت لزوم انجام دهیم

```
code .
```

- با دستور زیر خلاصه وضعیت فایل های خودمون رو مشاهده میکنیم

```
git status -s
```

4. یک ریپازیتوری ذر گیت هاب میسازیم و آدرس آن را کپی و در سه نقطه دستور زیر میگذاریم

```
git remote add origin ...
```

5. فایل ها را در گیت هاب آپلود میکنیم

```
git push -u origin master
```

- مستر نام برنچمون است  و اریجین هم نام ریموت ما است که هر دو قابل تغییر هستند

- اگر تغییراتی در ریموت ریپازیتوری یعنی گیت هاب انجام دادیم یا اینکه چندین نفر بر روی یک کد کار میکردیم قبل از

```
git push
```

دستور زیر را اجرا کنیم

```
git pull
```

که تغییرات ریموت ریپازیتوری روی سیستممون یعنی لوکال ریپازیتوری بیاد

### دستورات متفرقه

- سه نقطه در دستور ها به معنی اسم فایل مورد نظرمون است

1. دستور زیر فایل را از حالت استیج به مودیفاید می‌آورد

```
git restore --staged ...
```

2. دستور زیر فایل را از حالت مودیفاید هم خارج میکند

```
git restor ...
```

4. هیستوری ریپازیتوری

```
git log
Or
git log --oneline
```

5. لیست تمام نویسندگان

```
git config --list
```

6. تغییرات یوزر نیم و ایمیل خود (به جای 3 نقطه اطلاعات جدید مورد نظر رو وارد کن)

```
git config --global user.name "..."
git config --global user.email "..."
```

- اگر --گلوبال نذاریم در دستور بالا، یک یوزر نیم و ایمیل جدید برای ما اضافه میکند

7. لیست برنچ های لوکال رو برای ما میاره

```
git branch
Or
git branch --list
```

8. لیست برنچ های لوکال و ریموت رو برای ما میاره

```
git branch -a
```

9. ساخت برنچ جدید(سه نقطه اسم برنچ جدید است در دستور های 9 و 10)

```
git branch ...
```

10. جابجایی از برنچ مستر به برنچ جدیدی که ساختیم

```
git checkout ...
```


- با مراحل آپلود پروژه در گیت هاب که در بالا توضیح دادیم، میتوانیم برنچ جدید هم در ریموت ریپازیتوری آپلود کنیم

11. جابجایی بین برنچ ها (سه نقطه اول=برنچ در حال حاضر و سه نقطه دوم=برنچ جدید که میخواهیم به آن برویم)

```
git branch ... ...
```

12. دستور حذف برنچ در صورتی که در آن کامیتی نکرده باشیم

```
git branch --d ...
```

13. اگر در برنچ جدید کامیت کرده باشیم دو راه داریم برای حذف برنچ

- اول برنچ مورد نظر را با برنچ اصلی مرج میکنیم و سپس از دستور 12 استفاده میکنیم
- از یکی از 2 دستور زیر استفاده میکنیم(سه نقطه=نام برنچ)

```
git bramch -D ...
Or
git branch --d --force ...
```

14. آپدیت کردن سورس(مرج کردن) در برنچ
- سه نقطه اول=برنچ فرعی که روی آن کار کردیم و سه نقطه دوم=برنج اصلی که میخوایم فرعی با آن مرج شود مثلا مستر

```
git merge ... ...
git push -u origin master
```

15. با این دستور برنچ جدید مسیازیم و وارد آن هم میشویم

```
git checkout -b ...
```

16. با این دستور برنچ مورد نظرمون رو از ریموت هم پاک میکنیم

```
git push origin --deleted ...
```

17. برای دیدن تفاوت های بین دو برنچ

```
git diff ... ...
```

18. دستو زیر هر فایلی با فرمت مورد نظر ما را میسازد
(help.txt ---> مثال است)

```
Touch help.txt
```

19. بعد دستور زیر دوتا تب بزن تا ببینی چه چیزهایی رو میتونی پوش کنی

```
git push origin
```

20. همه‌ی تغییرات را در برنچ مورد نظر به ما نشان میدهد مثلا برنچ مستر

```
git show master
```

- برای نوشتن مسیج کامیت بهتره برای خوانایی کامیت ها در آینده اینگونه بنویسیم 
"متن مسیج: اسم برنچ"

### .gitignore

```
git .gitignore
```

- داخل این فایلی که ساختیم، اسم فولدر یا فایلی که مد نظرمون هست رو مینویسیم و این فایل یا فولدر توی لوکال ریپازیتوری نشون داده میشه ولی توی ریموت ریپازیتوری نشون داده نمیشه
البته این کار برای برای فایل هایی امکان پذیر است که داخل ریموت ریپازیتوری وجود ندارند یعنی هنوز پوش نکردیم
اگر فایلی توی ریموت وجود داشت و قصد انجام این کار را داشتیم
ابتدا باید اسم آن فایل را در .گیت‌ایگنور بنویسیم و سپس دستور زیر را بزنیم
(سه نقطه=نام فایل مورد نظر)

```
git rm -r --cache ...
git commit -am " "
git push -u origin master
```

### Clone

- برو توی آدرسی که میخوای کلون کنی (لوکال)
(سه نقطه= آدرس ریپازیتوری در گیت هاب)

```
git clone ...
```

- اگر برنچ خاصی رو از ریپازیتوری مورد نظر خواستیم کلون کنیم از دستور زیر استفاده میکنیم
(سه نقطه=آدرس برنچ آن ریپازیتوری)

```
git clone -b ...
```

### fast forward merge

- اگر بخواهیم از یک برنچ جدید مثلا دولوپ، یک برنچ دیگر ایجاد کنیم یعنی به جای اینکه برنچ جدید از مستر ایجاد شود از دولوپ ایجاد شود
(سه نقطه= نام برنچ جدید از دولوپ)

```
git checkout -b develop
git checkout -b ... develop
```

### 3 way merge

- وقتی که دوتا برنچ رو هم زمان با هم پیش میبریم، نیاز به مرج کامیت داریم
(سه نقطه اول=برنچ فرعی و سه نقطه دوم=برنچ اصلی)

```
git merge ... ... -m " "
```

### git log option

```
git log --oneline --decorate --graph --all
```

### resolving merge confilicts

- وقتی که دو دولوپر روی یک فایل کار میکنند و تغییراتی روی آن ایجاد میکنند
(مثلا روی یک خط مشابه در دو برنچ متفاوت)
آنگاه برای مرج کردن به مشکل هم زمانی برمیخوریم
برای حل آن بعد از زدن دستور مرج 
در وی اس کد حق انتخاب داریم که کدام تغییر اعمال شود
بعد از این کار بالا، دستورات زیر را داریم
(سه نقطه اول=برنچ فرعی و سه نقطه دوم=برنچ اصلی)

```
git commit -am "confilicts resolved"
git merge ... ...
```

### git stash

- تغییرات را روی حافظه گیت سیو میکنیم تا زمانی دیگر به سراغ ادامه کارمون بیاییم
(وقتی که کار دیگه ای رو شروع کنیم و تغییرات الانمون به مرحله کامیت نرسیده ولی اد رو زدیم)
(modified ---> git stash)
- استش برای ما کامیت انجام نمیده و فقط تغییرات را سیو میکند
- ترتیب در استش ---> آخرین استشی که تشکیل شده، شماره ی آن صفر است

- با دستور زیر لیست استش هایی که انجام دادیم رو میبینیم

```
git stash list
```

- برای استش انجام  شده پیام میگذاریم

```
git stash save " "
```

- برای اینکه ببینیم در استشی که قبلا انجام دادیم، چه تغییراتی به وجود آورده بودیم
(عدد دو نام استش است و برای مثال در دستور پایین نوشتم)

```
git stash show stash@{2}
```

- حالا میخواهیم تغییراتی که قبلا انجام دادیم و استش کردیم را دوباره بیاریم توی کار و ادامشو انجام بدیم

```
git stash apply stash@{2}
```

- دستور بالا هم تغییرات رو برای ما میاره و هم خودکار دستور
git status
را اجرا میکند

- با دستور زیر استش را از حافظه گیت پاک میکنیم

```
git stash drop stash@{2}
```

- دستور زیر کار دو خط دستور بالا راهم زمان انجام میدهد یعنی اپلای و دراپ کردن

```
git stash poop stash@{2}
```

- دستور زیر 4 کار انجام میدهد
	- برنچ جدید میسازد
	- به برنچ ساخته شده سویچ میکند
	- تغییرات را روی برنچ جدید اپلای میکند
	- استش را در نهایت دراپ میکند
	- (سه نقطه اول=برنچی که میخواهیم ساخته شود و سه نقطه دوم=نام استش مورد نظر)

```
git stash branch ... ...
```

- فایل های آنترکت توی استش قرار نمیگیرند، برای رفع این مشکل دستور زیر را داریم

```
git stash save --include-untracked
```

- فایل های تو حالت استیج رو ببر توی استش

```
git stash save --no-keep-index " "
```

- فایل هایی که توی حالت استیج نیست (یعنی مودیفاید) ببر توی استش

```
git stash save --keep-index " "
```

- بعد از دستور
```
git stash --
```
دوتا تب بزن تا همه‌ی دستوراتی که با استش میشه انجام داد نمایش داده بشه

- اگر بخواهیم همه‌ی تغییرات را به استش اضافه کنیم بدون توجه به اینکه فایل ها در چه حالتی هستند

```
git stash save --all " "
```

### git tag

- مثلا ده تا کامیت انجام دادیم و در کامیت یازدهم، یک کاری انجام شده به طور مثال اضافه شدن یک فیچر و در اون لحظه ما میخواییم ریلیز بدیم و در اون لحظه لازمه کامیت خود را تگ گذاری کنیم

- لیست تگ های موجود رو میتونیم ببینیم

```
git tag --list
```

- ساده ترین نوع تگ به نام
lightway tag
که آخرین کامیت این تگ را میپذیرد

```
git tag v1.0
```

- پنج کامیت آخر را به ما نمایش میدهد

```
git log --oneline -n5
```

- اگر اطلاعات یک تگ خص رو بخواییم ببینیم

```
git show v1.0
```

- نوع دیگری از تگ داریم به اسم
annotated tag

```
git tag -a v1.1 -m " "
```

- پس ما یک کامیت خص رو تگ میکنیم تا بگیم این کامیت ریلیز ما هستش مثلا ریلیز ورژن 1.1

- گیت به طور پیش فرض تگ هایی که میسازیم رو با دستور
```
git push -u origin master
```
نمیبره توی توی ریموت ریپازیتوری و ما باید به صورت دستی با استفاده از دستور زیر تگ مورد نظرمون رو به ریموت ریپازیتوری بفرستیم
(جای سه نقطه نام تگ را میگذازیم)

```
git push origin ...
```

- با دستور زیر تگ را از لوکال ریپازیتوری حذف میکنیم
(سه نقطه=نام تگ)

```
git tag --delete ...
```

- با دستور زیر تگ را از ریموت ریپازیتوری حذف میکنیم

```
git push origin --delete ...
```

- چگونه به کامیتی دلخواه تگ را بدهیم؟
(یعنی تگ را به جای آخرین کامیت به هر کامیتی که میخواهیم بدهیم)
ابتدا از دستور زیر استفاده میکنیم تا آیدی کامیتی که مد نظرمون هست رو بفهمیم

```
git log --onelline
```

سپس از دستور زیر استفاده میکنیم
(سه نقطه اول=نام تگ و سه نقطه دوم=آیدی کامیت مورد نظر)

```
git tag -a ... -m " " ... 
```

- دیتای موجود در یک تگ را با دستور زیر میبینیم
(سه نقطه=نام تگ)

```
git show ...
```

### issue

- کامیت کردن به همراه بستن ایشوو در گیت هاب

```
git commit -am " "
```

- در مسیج نوشتن برای اینکار، یک کار اضافه باید انجلم بدیم به عنوان مثال
"changes in index.html fixes #2"
				      closed #2
				      resolve #2
عدد # شماره ایشوو در گیت های است

از یکی از کلمات زیر هم میتوان استفاده کرد + شاره ایشوو در گیت هاب
- fix
- fixed
- close
- resolves
- resolved

- در قسمت ایشوو گزینه ای وجود دارد به نام
Milestone
که با این قسمت هدف برای پروژمون انتخاب میکنیم

### git commit amend

- ویرایش کردن یک کامیت

- تغییرات را به کامیت قبلی اضافه میکند بدون تغییر مسیج آن

```
git commit --amend --no-edit
```

- برای وقتی که تغییرات را به کامیت قبلی اضافه میکنیم ولی قصد تغییر مسیج آن را هم داریم

```
git commit --amend --message=" "
```

- این دستور و دستور بالایی ، دستور تغییر نیست. در اصل کامیت قبلی را حذف میکند و کامیت جدید را جایگزین میکند

### git rebase

- پایه برنچ فرعی رو جا به جا میکنیم(بیس کامیت رو تغییر میدیم برای برنچ فرعی)

- مثلا اگر میخواییم برنچ دولوپ رو که برنچ فرعی است، ری بیس کنیم روی آخرین کامیت برنچ اصلی یعنی مستر، برای این دستور باید در برنچ دولوپ حضور داشته باشیم

```
git checkout develop
git rebase master
git merge develop
```

- در صورت اتفاق افتادن
confilict
در ری بیس کردن، میتوانیم یکی از 3 کار زیر را انجام دهیم

1. رد شدن

```
git rebase --skip
```

2. کنسل کردن

```
git rebase --abort
```

3. کانفلیک ها را رفع کنیم و ادامه بدهیم
4. (قبل از اجرای این دستور،مشکل را حل کرده ایم)

```
git rebase --continue
```

### git fetch

```
git fetch origin master
```

- تغییرات را از ریموت ریپازیتوری به لوکال ریپازیتوری می‌آورد
(هم گام سازی میکنه بین اوریجین مستر و لوکال مستر)
این عمل در گیت هاب دسک تاپ به طور اتوماتیک اجرا میشود

- این عمل میاد اوریجین مستر توی لوکال ریپازیتوری رو آپدیت میکنه با مستر ریپازیتوری، اما مستر لوکال رو آپدیت نمیکنه. چیکار کنیم ؟

```
git merge origin/master
```

- اوریجین/مستر دستور بالا --> کپی از ریموت ریپازیتوری که توی لوکال ریپازیتوری وجود داره

- این فچ و مرج، پشت صحنه‌ی گیت پول است

### git reflog

- با دستور
```
git log
```
ما میتوانیم تاریخچه اتفاقاتی که توی برنچ یا ریپازیتوری افتاده(از طریق برنچ های مختلف)
و هیستوری کامیت ها را ببینیم(مثلا به صورت گراف)
اما با استفاده از دستور
```
git reflog
```
به جز و ریز تمام اتفاقاتی که در ریپازیتوری افتاده رو ببینیم(از ایتدا تا انتها)

- با این دستور داخل هر ریف لاگ رو با تمام جزئیات میشه دید

```
git show HEAD@{9}
```

- میتوانیم ریف لاگ تمام کامیت ها را جدا ببینیم
(خلاصه دیتای کامیت هم به ما نشون میدهد)

```
git log -g
```